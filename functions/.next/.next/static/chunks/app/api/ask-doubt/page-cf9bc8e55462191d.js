(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[68],{5259:(e,t,r)=>{Promise.resolve().then(r.bind(r,6294))},5695:(e,t,r)=>{"use strict";var a=r(8999);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},6294:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),s=r(2115),u=r(8475),l=r(6203),o=r(5317),d=r(5695);function i(){var e;let t=(0,d.useRouter)(),[r,i]=(0,s.useState)(null),[n,c]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[b,h]=(0,s.useState)(""),[f,x]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=(0,l.hg)(u.j,async e=>{if(e){let s=await (0,o.x7)((0,o.H9)(u.db,"users",e.uid));if(s.exists()){var r,a;let u=s.data();console.log("Role fetched:",u.role),(null==(r=u.role)?void 0:r.trim())!=="Student"&&(null==(a=u.role)?void 0:a.trim())!=="Learner"&&(alert("Only learners can post doubts!"),t.push("/dashboard")),i({uid:e.uid,name:u.name,subjects:u.subjects||[]})}}else t.push("/login")});return()=>e()},[t]);let v=async e=>{if(e.preventDefault(),x(""),!n||!p||!b)return void x("All fields are required!");if(!r)return void x("User not loaded!");try{let e=await (0,o.gS)((0,o.rJ)(u.db,"doubts"),{uid:r.uid,name:r.name,subject:b.trim(),title:n.trim(),description:p.trim(),createdAt:(0,o.O5)()});await fetch("/api/matchTutor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doubtId:e.id,subject:b.trim(),description:p.trim()})}),alert("Doubt posted and tutors matched!"),c(""),m(""),h(""),t.push("/dashboard")}catch(e){console.error(e),x("Failed to post doubt!")}};return(0,a.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen p-4 w-full",children:[(0,a.jsx)("h1",{className:"text-3xl mb-6",children:"Post Your Doubt"}),(0,a.jsxs)("form",{onSubmit:v,className:"w-full max-w-md flex flex-col gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Title of your doubt",value:n,onChange:e=>c(e.target.value),className:"border p-2",required:!0}),(0,a.jsx)("textarea",{placeholder:"Describe your doubt in detail...",value:p,onChange:e=>m(e.target.value),className:"border p-2",rows:5,required:!0}),r&&(null==(e=r.subjects)?void 0:e.length)>0?(0,a.jsxs)("select",{value:b,onChange:e=>h(e.target.value),className:"border p-2",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a subject"}),r.subjects.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}):(0,a.jsx)("input",{type:"text",placeholder:"Subject",value:b,onChange:e=>h(e.target.value),className:"border p-2",required:!0}),f&&(0,a.jsx)("p",{className:"text-red-500",children:f}),(0,a.jsx)("button",{type:"submit",className:"bg-green-600 text-white p-2 rounded",children:"Post Doubt"})]})]})}},8475:(e,t,r)=>{"use strict";let a;r.d(t,{db:()=>d,j:()=>o});var s=r(3915),u=r(6203),l=r(5317);s.Wp.length,a=(0,s.Wp)({apiKey:"AIzaSyAmB_wDxvKkrbD3G8e3qqldfvUIaqke-gs",authDomain:"peertutorfinder.firebaseapp.com",projectId:"peertutorfinder",storageBucket:"peertutorfinder.firebasestorage.app",messagingSenderId:"861946198169",appId:"1:861946198169:web:55369d32dda12c14f62008"});let o=(0,u.xI)(a),d=(0,l.aU)(a)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,441,684,358],()=>t(5259)),_N_E=e.O()}]);