(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{254:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(5155),l=s(2115),r=s(6203),n=s(8475),i=s(5695),d=s(5317);function c(){var e;let t=(0,i.useRouter)(),[s,c]=(0,l.useState)(null),[u,o]=(0,l.useState)([]),[m,x]=(0,l.useState)([]),[b,h]=(0,l.useState)(""),[p,j]=(0,l.useState)(null),[f,N]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=(0,r.hg)(n.j,e=>{e?(async()=>{let t=await (0,d.GG)((0,d.rJ)(n.db,"users")),s=[],a=null;t.forEach(t=>{let l=t.data();l.uid&&l.uid===e.uid?a=l:l.uid&&s.push(l)}),c(a),o(s)})():t.push("/login")});return()=>e()},[t]);let g=async e=>{s&&(await (0,d.gS)((0,d.rJ)(n.db,"connectionRequests"),{fromUid:s.uid,fromName:s.name,toUid:e.uid,toName:e.name,message:f||"Hi! I'd like to connect and collaborate!",createdAt:(0,d.O5)()}),alert("Connection request sent to ".concat(e.name)),j(null),N(""))},v=u.filter(e=>{var t;return(null==(t=e.subjects)?void 0:t.join(" ").toLowerCase().includes(b.toLowerCase()))&&!m.find(t=>t.uid===e.uid)});return(0,a.jsxs)("main",{className:"flex flex-col items-center min-h-screen p-4 w-full",children:[(0,a.jsx)("h1",{className:"text-3xl mb-4",children:"Find & Connect with Peers"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by subject...",value:b,onChange:e=>h(e.target.value),className:"border p-2 mb-6 w-full max-w-md"}),0===v.length?(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:"No new peers found for this subject."}):(0,a.jsx)("div",{className:"w-full max-w-md mb-10",children:v.map(e=>{var t;return(0,a.jsxs)("div",{className:"border p-4 mb-2 rounded shadow",children:[(0,a.jsx)("p",{className:"font-bold",children:e.name}),(0,a.jsx)("p",{className:"text-sm",children:e.role}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Subjects: ",(null==(t=e.subjects)?void 0:t.join(", "))||"N/A"]}),(0,a.jsx)("button",{onClick:()=>j(e),className:"text-blue-500 text-sm mt-2 underline",children:"View Profile"})]},e.uid)})}),(0,a.jsx)("div",{className:"w-full max-w-md",children:m.map(e=>{var t;return(0,a.jsxs)("div",{className:"border p-4 mb-4 rounded shadow",children:[(0,a.jsx)("p",{className:"font-bold text-lg",children:e.name}),(0,a.jsxs)("p",{className:"text-sm",children:["Role: ",e.role]}),(0,a.jsxs)("p",{className:"text-sm",children:["Subjects: ",(null==(t=e.subjects)?void 0:t.join(", "))||"N/A"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.bio||"No bio provided."})]},e.uid)})}),p&&(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 bottom-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded shadow max-w-md w-full",children:[(0,a.jsx)("h2",{className:"text-xl mb-2 text-sm text-gray-700",children:p.name}),(0,a.jsxs)("p",{className:"mb-1 text-sm text-gray-700",children:["Role: ",p.role]}),(0,a.jsxs)("p",{className:"mb-1 text-sm text-gray-700",children:["Subjects: ",(null==(e=p.subjects)?void 0:e.join(", "))||"N/A"]}),(0,a.jsx)("p",{className:"mb-4 text-sm text-gray-700",children:p.bio||"No bio available."}),(0,a.jsx)("textarea",{placeholder:"Write a message...",value:f,onChange:e=>N(e.target.value),className:"border w-full p-2 mb-2 text-sm text-gray-700"}),(0,a.jsx)("button",{onClick:()=>g(p),className:"bg-green-500 text-white px-4 py-2 rounded mr-2",children:"Send Request"}),(0,a.jsx)("button",{onClick:()=>j(null),className:"text-gray-500 px-4 py-2",children:"Cancel"})]})})]})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},8475:(e,t,s)=>{"use strict";let a;s.d(t,{db:()=>d,j:()=>i});var l=s(3915),r=s(6203),n=s(5317);l.Wp.length,a=(0,l.Wp)({apiKey:"AIzaSyAmB_wDxvKkrbD3G8e3qqldfvUIaqke-gs",authDomain:"peertutorfinder.firebaseapp.com",projectId:"peertutorfinder",storageBucket:"peertutorfinder.firebasestorage.app",messagingSenderId:"861946198169",appId:"1:861946198169:web:55369d32dda12c14f62008"});let i=(0,r.xI)(a),d=(0,n.aU)(a)},9381:(e,t,s)=>{Promise.resolve().then(s.bind(s,254))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,441,684,358],()=>t(9381)),_N_E=e.O()}]);