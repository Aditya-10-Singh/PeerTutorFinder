(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{1143:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(5155),r=a(2115),n=a(6203),d=a(8475),c=a(5695),o=a(5317);function i(){let e=(0,c.useRouter)(),[t,a]=(0,r.useState)(null),[i,u]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=(0,n.hg)(d.j,async t=>{t?(a(t.uid),l(t.uid)):e.push("/login")});return()=>t()},[e]);let l=async e=>{let t=(0,o.P)((0,o.rJ)(d.db,"connectionRequests"),(0,o._M)("toUid","==",e)),a=await (0,o.GG)(t),s=[];a.forEach(e=>{s.push({id:e.id,fromUid:e.data().fromUid,fromName:e.data().fromName,toUid:e.data().toUid,toName:e.data().toName,message:e.data().message,createdAt:e.data().createdAt})}),u(s)},m=async e=>{t&&(await (0,o.gS)((0,o.rJ)(d.db,"connections"),{userA:t,userB:e.fromUid,createdAt:(0,o.O5)()}),await (0,o.kd)((0,o.H9)(d.db,"connectionRequests",e.id)),alert("Connection accepted with ".concat(e.fromName)),l(t))},f=async e=>{t&&(await (0,o.kd)((0,o.H9)(d.db,"connectionRequests",e.id)),alert("Connection request from ".concat(e.fromName," rejected")),l(t))};return(0,s.jsxs)("main",{className:"flex flex-col items-center justify-start min-h-screen p-4 w-full",children:[(0,s.jsx)("h1",{className:"text-3xl mb-4",children:"Connection Requests"}),0===i.length&&(0,s.jsx)("p",{className:"text-gray-500",children:"You have no pending requests."}),(0,s.jsx)("div",{className:"w-full max-w-md",children:i.map(e=>(0,s.jsxs)("div",{className:"border p-4 mb-4 rounded shadow",children:[(0,s.jsx)("p",{className:"font-bold",children:e.fromName}),(0,s.jsx)("p",{className:"text-sm mb-2",children:e.message}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{onClick:()=>m(e),className:"bg-green-500 text-white px-4 py-2 rounded text-sm",children:"Accept"}),(0,s.jsx)("button",{onClick:()=>f(e),className:"bg-red-500 text-white px-4 py-2 rounded text-sm",children:"Reject"})]})]},e.id))})]})}},3244:(e,t,a)=>{Promise.resolve().then(a.bind(a,1143))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},8475:(e,t,a)=>{"use strict";let s;a.d(t,{db:()=>o,j:()=>c});var r=a(3915),n=a(6203),d=a(5317);r.Wp.length,s=(0,r.Wp)({apiKey:"AIzaSyAmB_wDxvKkrbD3G8e3qqldfvUIaqke-gs",authDomain:"peertutorfinder.firebaseapp.com",projectId:"peertutorfinder",storageBucket:"peertutorfinder.firebasestorage.app",messagingSenderId:"861946198169",appId:"1:861946198169:web:55369d32dda12c14f62008"});let c=(0,n.xI)(s),o=(0,d.aU)(s)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,441,684,358],()=>t(3244)),_N_E=e.O()}]);