(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4879:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(5155),r=s(2115),n=s(6203),l=s(8475),d=s(5695),i=s(5317),u=s(6874),c=s.n(u);function o(){let e=(0,d.useRouter)(),[t,s]=(0,r.useState)(null),[u,o]=(0,r.useState)(""),[m,p]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=(0,n.hg)(l.j,async t=>{if(t){let e=(0,i.H9)(l.db,"users",t.uid),a=await (0,i.x7)(e);if(a.exists()){let e=a.data();!e.name&&t.displayName&&(e.name=t.displayName),s(e)}else s({uid:t.uid,email:t.email||"",name:t.displayName||"User",role:"N/A",createdAt:null});x()}else e.push("/login")});return()=>t()},[e]);let x=async()=>{let e=(0,i.P)((0,i.rJ)(l.db,"posts"),(0,i.My)("createdAt","desc")),t=await (0,i.GG)(e),s=[];t.forEach(e=>{let t=e.data();s.push({id:e.id,uid:t.uid,name:t.name,content:t.content,createdAt:t.createdAt})}),p(s)},h=async e=>{e.preventDefault(),t&&(await (0,i.gS)((0,i.rJ)(l.db,"posts"),{uid:t.uid,name:t.name,content:u,createdAt:(0,i.O5)()}),o(""),x())},b=async()=>{await (0,n.CI)(l.j),e.push("/login")};return(0,a.jsx)("main",{className:"flex flex-col items-center justify-center min-h-screen p-4 w-full",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h1",{className:"text-3xl mb-2",children:["Welcome, ",t.name,"!"]}),(0,a.jsxs)("p",{className:"mb-2",children:["Role: ",t.role]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-12",children:[(0,a.jsx)(c(),{href:"/community",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"Community Connect"}),(0,a.jsx)(c(),{href:"/peers",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"Find Tutors & Learners"}),(0,a.jsx)(c(),{href:"/connections",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"Connection Requests"}),(0,a.jsx)(c(),{href:"/api/ask-doubt",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"Post a Doubt"}),(0,a.jsx)(c(),{href:"/my-doubts",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"View My Doubts"}),(0,a.jsx)(c(),{href:"/all-doubts",className:"bg-purple-500 text-white px-4 py-2 rounded text-center",children:"View All Doubts"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"w-full max-w-md mb-8",children:[(0,a.jsx)("textarea",{value:u,onChange:e=>o(e.target.value),placeholder:"Share what you’re working on…",className:"border w-full p-2 mb-2",required:!0}),(0,a.jsx)("button",{type:"submit",className:"bg-green-500 text-white p-2 rounded",children:"Post"})]}),(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsx)("h2",{className:"text-xl mb-2",children:"Community Posts"}),0===m.length&&(0,a.jsx)("p",{children:"No posts yet. Be the first!"}),m.map(e=>{var t;return(0,a.jsxs)("div",{className:"border p-4 mb-2 rounded",children:[(0,a.jsx)("p",{className:"font-bold",children:e.name}),(0,a.jsx)("p",{children:e.content}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate().toLocaleString():"Just now"})]},e.id)})]}),(0,a.jsx)("button",{onClick:b,className:"bg-red-500 text-white p-2 rounded mb-4",children:"Log Out"})]}):(0,a.jsx)("p",{children:"Loading profile..."})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},8475:(e,t,s)=>{"use strict";let a;s.d(t,{db:()=>i,j:()=>d});var r=s(3915),n=s(6203),l=s(5317);r.Wp.length,a=(0,r.Wp)({apiKey:"AIzaSyAmB_wDxvKkrbD3G8e3qqldfvUIaqke-gs",authDomain:"peertutorfinder.firebaseapp.com",projectId:"peertutorfinder",storageBucket:"peertutorfinder.firebasestorage.app",messagingSenderId:"861946198169",appId:"1:861946198169:web:55369d32dda12c14f62008"});let d=(0,n.xI)(a),i=(0,l.aU)(a)},9870:(e,t,s)=>{Promise.resolve().then(s.bind(s,4879))}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,874,441,684,358],()=>t(9870)),_N_E=e.O()}]);