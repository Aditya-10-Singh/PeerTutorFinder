(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{4686:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(5155),r=a(2115),d=a(6203),o=a(8475),n=a(5695),i=a(5317);function c(){let e=(0,n.useRouter)(),[t,a]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[l,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{let t=(0,d.hg)(o.j,async t=>{t?(u(t.uid),f(t.uid),h(t.uid)):e.push("/login")});return()=>t()},[e]);let f=async e=>{let t=(0,i.P)((0,i.rJ)(o.db,"connections"),(0,i._M)("fromUid","==",e)),s=(0,i.P)((0,i.rJ)(o.db,"connections"),(0,i._M)("toUid","==",e)),r=await (0,i.GG)(t),d=await (0,i.GG)(s),n=[];r.forEach(e=>{let t=e.data();n.push({id:e.id,fromUid:t.fromUid,fromName:t.fromName,toUid:t.toUid,toName:t.toName,message:t.message,createdAt:t.createdAt})}),d.forEach(e=>{let t=e.data();n.push({id:e.id,fromUid:t.fromUid,fromName:t.fromName,toUid:t.toUid,toName:t.toName,message:t.message,createdAt:t.createdAt})}),a(n)},h=async e=>{let t=(0,i.P)((0,i.rJ)(o.db,"connectionRequests"),(0,i._M)("toUid","==",e)),a=await (0,i.GG)(t),s=[];a.forEach(e=>{let t=e.data();s.push({id:e.id,fromUid:t.fromUid,fromName:t.fromName,toUid:t.toUid,toName:t.toName,message:t.message,createdAt:t.createdAt})}),m(s)},x=async e=>{await (0,i.gS)((0,i.rJ)(o.db,"connections"),{fromUid:e.fromUid,fromName:e.fromName,toUid:e.toUid,toName:e.toName,message:e.message,createdAt:(0,i.O5)()}),await (0,i.kd)((0,i.H9)(o.db,"connectionRequests",e.id)),alert("Accepted connection with ".concat(e.fromName)),f(l),h(l)},N=async e=>{await (0,i.kd)((0,i.H9)(o.db,"connectionRequests",e.id)),alert("Rejected request from ".concat(e.fromName)),h(l)};return(0,s.jsxs)("main",{className:"flex flex-col items-center justify-center min-h-screen p-4 w-full",children:[(0,s.jsx)("h1",{className:"text-3xl mb-4",children:"Your Connections"}),0===t.length&&(0,s.jsx)("p",{children:"No active connections yet."}),(0,s.jsx)("div",{className:"w-full max-w-md mb-8",children:t.map(e=>{var t;let a=e.fromUid===l?e.toName:e.fromName;return(0,s.jsxs)("div",{className:"border p-4 mb-2 rounded shadow",children:[(0,s.jsxs)("p",{children:["Connected with ",(0,s.jsx)("strong",{children:a})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Message: ",e.message]}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:(null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate().toLocaleString():""})]},e.id)})}),(0,s.jsx)("h2",{className:"text-2xl mb-4",children:"Incoming Requests"}),0===c.length&&(0,s.jsx)("p",{className:"text-gray-500",children:"No incoming requests."}),(0,s.jsx)("div",{className:"w-full max-w-md",children:c.map(e=>(0,s.jsxs)("div",{className:"border p-4 mb-4 rounded shadow",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:e.fromName})," wants to connect."]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Message: ",e.message]}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>x(e),className:"bg-green-500 text-white px-4 py-1 rounded",children:"Accept"}),(0,s.jsx)("button",{onClick:()=>N(e),className:"bg-red-500 text-white px-4 py-1 rounded",children:"Reject"})]})]},e.id))})]})}},4993:(e,t,a)=>{Promise.resolve().then(a.bind(a,4686))},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},8475:(e,t,a)=>{"use strict";let s;a.d(t,{db:()=>i,j:()=>n});var r=a(3915),d=a(6203),o=a(5317);r.Wp.length,s=(0,r.Wp)({apiKey:"AIzaSyAmB_wDxvKkrbD3G8e3qqldfvUIaqke-gs",authDomain:"peertutorfinder.firebaseapp.com",projectId:"peertutorfinder",storageBucket:"peertutorfinder.firebasestorage.app",messagingSenderId:"861946198169",appId:"1:861946198169:web:55369d32dda12c14f62008"});let n=(0,d.xI)(s),i=(0,o.aU)(s)}},e=>{var t=t=>e(e.s=t);e.O(0,[992,811,645,441,684,358],()=>t(4993)),_N_E=e.O()}]);